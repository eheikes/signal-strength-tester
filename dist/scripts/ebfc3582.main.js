function updateData(){if(tester.hasRun){var a=$("table#data");$(".requests",a).text(numeral(tester.numRequests).format("0,0")),$(".responses",a).text(numeral(tester.numResponses).format("0,0")),$(".percentage",a).text(numeral(tester.percentSuccessful).format("0.0%"));var b=$("#strength"),c="";switch(tester.strength){case"Strong":c="text-success";break;case"Medium":c="text-info";break;case"Weak":c="text-warning";break;case"No Signal":c="text-danger"}b.removeClass("hidden text-success text-info text-warning text-danger"),b.addClass(c),$(".text",b).text(tester.strength)}}function updateSettingsForm(){var a=$("#settings");$("#setting-httpType",a).val(tester.httpType),$("#setting-testUrl",a).val(tester.testUrl),$("#setting-useJsonP",a).prop("checked",tester.useJsonP),$("#setting-timeout",a).val(tester.timeout),$("#setting-interval",a).val(tester.interval)}var WifiTester=function(){function a(){this.httpType="GET",this.testUrl="http://192.168.0.1/test-payload.txt",this.useJsonP=!1,this.timeout=1e3,this.interval=1e3,this.hasRun=!1,this.reset()}return a.prototype.calc=function(){this.percentSuccessful=this.numResponses/this.numRequests,this.strength=0===this.numResponses?"No Signal":this.percentSuccessful>=.8?"Strong":this.percentSuccessful>=.4?"Medium":"Weak"},a.prototype.reset=function(){this.numRequests=0,this.numResponses=0,this.percentSuccessful=0,this.strength=""},a.prototype.restart=function(){this.stop(),this.reset(),this.start()},a.prototype.set=function(a,b){var c=["httpType","testUrl","useJsonP","timeout","interval"];return c.indexOf(a)>-1?(this[a]=b,!0):!1},a.prototype.start=function(){var a=this;a.hasRun=!0,a.isRunning=!0,a.intervalID=window.setInterval(function(){a.test()},a.interval)},a.prototype.stop=function(){this.isRunning=!1,this.intervalID&&(window.clearInterval(this.intervalID),this.intervalID=null)},a.prototype.test=function(){var a=this,b=a.intervalID;a.numRequests++;var c=$.ajax({url:a.testUrl,type:a.httpType,timeout:a.timeout,dataType:a.useJsonP?"jsonp":"text",cache:!1});c.done(function(){b===a.intervalID&&a.numResponses++}),c.fail(function(c,d,e){b===a.intervalID&&("parsererror"===d?a.numResponses++:(console.log(d),console.log(e)))}),c.always(function(){a.calc()})},a}(),tester=new WifiTester;$(document).ready(function(){$("#no-js-msg").addClass("hidden"),updateSettingsForm(),$("button#start").click(function(){$("button#clear").removeClass("hidden"),tester.isRunning?(tester.stop(),$(this).text("Resume")):(tester.start(),$(this).text("Pause"))}),$("button#clear").click(function(){tester.isRunning?tester.restart():tester.reset(),updateData()}),$("#settings").on("change","input,select",function(){var a=$(this).attr("id"),b=a.replace(/^setting-/,""),c=$(this).val();switch(b){case"useJsonP":tester.set(b,$(this).prop("checked"));break;case"timeout":case"interval":tester.set(b,parseFloat(c));break;default:tester.set(b,c)}}),$(".panel-heading").on("click",function(){return $(this).parents(".panel").children(".panel-collapse").hasClass("in")?!1:void 0}),window.setInterval(function(){updateData()},500)});